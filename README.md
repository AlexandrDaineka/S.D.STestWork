# S.D.STestWork

Здравствуйте! В этом файле я покажу вам пошаговую инструкцию по запуску проекта. Ниже приведены примеры использования эндпоинтов!


## Шаги для запуска

### Шаг 1: Скачайте проект

Клонируйте или загрузите репозиторий на свой компьютер.

### Шаг 2: Настройка подключения к базе данных

Убедитесь, что настройки базы данных соответствуют требованиям проекта:
- **База данных:** PostgreSQL
- **Порт по умолчанию:** `5433` (если у вас другой порт, обновите его в файле `application.properties`)
- **Название базы данных:** `student_db`

Настройте учетные данные для базы данных следующим образом:

spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:qwerty}

Скрипт для создания таблицы !

CREATE TABLE student (
    id SERIAL PRIMARY KEY,
    last_name VARCHAR(255) NOT NULL,
    first_name VARCHAR(255) NOT NULL,
    middle_name VARCHAR(255),
    student_group VARCHAR(50) NOT NULL,
    average_grade DECIMAL(3, 2) NOT NULL
);
> **Примечание:** Я хотел сделать микрации через `Liquibase`, но в задании этого небыло и я не стал мудрить.

### Шаг 3: Запуск приложения

Запустите приложение в вашей IDE. 
> **Примечание:** Приложение настроено на использование порта `8181` для локального хоста. Если у вас данный порт занят под другие нужды, измените его в настройках `application.properties`.

### Шаг 4: Получение токена доступа

Для доступа к защищенным эндпоинтам необходимо получить `access_token`.

1. Откройте Postman и создайте новый запрос для получения `access_token`.
   - **Метод:** `POST`
   - **URL:** `http://localhost:8181/oauth2/token`
     - _Примечание: Порт может отличаться в зависимости от ваших настроек._
2. В разделе **Авторизация** выберите тип `Basic Auth` и укажите:
   - **Username:** `client`
   - **Password:** `secret`
3. В теле запроса (Body) выберите `x-www-form-urlencoded` и добавьте следующие параметры:
   - `grant_type: client_credentials`

После отправки этого запроса вы получите ответ с `access_token`, который можно будет использовать для доступа к защищенным ресурсам.

4. Для доступа к защищенным эндпоинтам в Postman, в разделе **Authorization** выберите `Bearer Token` и вставьте `access_token`, полученный на предыдущем шаге.

Пример полученого токена:
![image](https://github.com/user-attachments/assets/8918192e-1f4b-4131-889a-8f72b7f0f15b)

Вот как выглядит процесс получения токена:
![image](https://github.com/user-attachments/assets/1070f9a5-fc78-4b33-97dc-77dcd3bad714)


### Шаг 5: Взаимодействие с эндпоинтами

Ниже приведены примеры использования всех четырех эндпоинтов. 
> **Примечание:** В примерах используется порт `8181`. Измените его, если у вас другой.

#### Метод PUT: Создание или обновление студента

Пример JSON для запроса:

{
  "lastName": "Ivanov",
  "firstName": "Ivan",
  "middleName": "Ivanovich",
  "studentGroup": "A1",
  "averageGrade": 4.5
}

![image](https://github.com/user-attachments/assets/176d97a3-bf87-4414-a268-5ee358b2e05c)

#### Метод DELETE: Удаление студента

В хедерах указываем `id` студента который нам нарвится меньше всего и удаляем его! После отправки запроса вы получите статус `204`, что означает, что удаление прошло успешно и контент был удален.

![image](https://github.com/user-attachments/assets/f6ed7b73-820a-4d3b-a689-b31aa1af4718)

#### Метод GET: Получение списка всех студентов

Отправляем запрос для получения списка всех студентов. Дополнительно ничего указывать не нужно, кроме токена авторизации `Bearer Token`.

![image](https://github.com/user-attachments/assets/d5cebf27-67ad-44f0-a007-8d9a53fad588)
#### Метод POST: Обновление данных студента

После отправки запроса можно проверить изменения, выполнив запрос `GET` для получения обновленных данных студента.

Пример запроса на изменение данных студента:
![image](https://github.com/user-attachments/assets/0568b57f-2579-49fb-8b00-e457476d64b8)
после изменения студента можем проверить методом `GET` действительно ли он изменился!
![image](https://github.com/user-attachments/assets/f873cb38-7d9f-4b24-bd2d-580796e55820)







